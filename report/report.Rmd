---
title: "titanic_report"
author: "Alp Gunsever"
date: "13/01/2021"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## 1 - Introduction 

This is a data analysis report intended to test bayesian data analysis skills using the titanic dataset from kaggle.

```{r libraries}
library(rstan)
rstan_options(auto_write = TRUE)
options(mc.cores = parallel::detectCores())
library(shinystan)
library(stringr)
source(file.path("C:","Users","alpgu","Dropbox","Data Science","Bayesian Data Analysis","BDA3 (Gelman)","titanic","scripts","helperFunctions.R"))
```

## 2- Exploratory Data Analysis

We are first going to make an exploratory analysis on the data available at hand. We format the data beforehand in both training and test sets.

```{r clean data}
# read train data
dir <- file.path("C:","Users","alpgu","Dropbox","Data Science","Bayesian Data Analysis","BDA3 (Gelman)","titanic","data")
dat.train <- read.csv(file.path(dir,"train.csv"))
dat.test <- read.csv(file.path(dir,"test.csv"))

# adjustments on data set
# clean train and test data
train <- cleanTitanicData(dat.train,'train')
test <- cleanTitanicData(dat.test,'test')

y.train <- as.numeric(train$Survived) # outcome
y.train <- y.train-1
pId.train <- train$PassengerId # ID for predictions
pId.test <- test$PassengerId # ID for predictions

N.train <- nrow(train)
K.train <- ncol(train)
N.test <- nrow(test)
K.test <- ncol(test)

```

## 3- Prior Predictive Checking

